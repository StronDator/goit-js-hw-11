{"version":3,"file":"commonHelpers.js","sources":["../src/js/notifications.js","../src/js/render-html.js","../src/js/download.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst octagonIconUrl = new URL('../img/octagon.svg', import.meta.url).href;\nconst closeIconUrl = new URL('../img/x.svg', import.meta.url).href;\n\nexport function createMessage(textMessage = '') {\n  iziToast.show({\n    // title: 'Error',\n    titleColor: '#FFF',\n    titleSize: '16px',\n    message: textMessage,\n    messageColor: '#FFF',\n    messageSize: '16px',\n    maxWidth: '462px',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    iconUrl: octagonIconUrl,\n    progressBarColor: '#FFBEBE',\n    timeout: 5000,\n    targetFirst: false,\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" id=\"izi-close-button\">\n                 <img src=\"${closeIconUrl}\" alt=\"\" width=\"16px\" height=\"16px\" />\n              </button>`,\n        function (instance, toast) {\n          instance.hide({}, toast, 'buttonName');\n        },\n      ],\n    ],\n  });\n\n  // div самого вікна\n  let messageElement = document.querySelector('.iziToast.fadeInUp');\n  messageElement.style.paddingTop = '20px';\n  messageElement.style.paddingBottom = '20px';\n\n  // текст помилки\n  messageElement = document.querySelector(\n    '.iziToast>.iziToast-body .iziToast-texts'\n  );\n  messageElement.style.maxWidth = '322px';\n}","import { createMessage } from './notifications';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\n\nconst lightboxConfig = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n};\n\nexport const gallery = new SimpleLightbox('.gallery a', lightboxConfig);\n\nfunction generateImageHTML(image) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n\n  return `\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      <ul class=\"property-list\">\n        <li class=\"property-item\">\n          <p class=\"property-title\">Likes</p>\n          <p class=\"property-value\">${likes}</p>\n        </li>\n        <li class=\"property-item\">\n          <p class=\"property-title\">Views</p>\n          <p class=\"property-value\">${views}</p>\n        </li>\n        <li class=\"property-item\">\n          <p class=\"property-title\">Comments</p>\n          <p class=\"property-value\">${comments}</p>\n        </li>\n        <li class=\"property-item\">\n          <p class=\"property-title\">Downloads</p>\n          <p class=\"property-value\">${downloads}</p>\n        </li>\n      </ul>  \n    </a>`;\n}\n\nexport function renderImages(images) {\n  if (images.hits.length === 0) {\n    galleryEl.innerHTML = '';\n    createMessage('Sorry, there are no images matching your search query. Please try again!');\n    return;\n  }\n\n  const galleryHTML = images.hits.map(generateImageHTML).join('');\n  galleryEl.innerHTML = galleryHTML;\n  gallery.refresh();\n}\n","import { renderImages } from './render-html';\nimport { createMessage } from './notifications';\n\nconst buttonEl = document.querySelector('.search-btn');\nconst loadingTextEl = document.querySelector('.loading-message');\nconst loaderEl = document.querySelector('.loader');\n\nexport function downloadImages(searchKey) {\n  loaderEl.style.display = 'block';\n  buttonEl.disabled = true;\n  buttonEl.blur();\n  galleryEl.innerHTML = '';\n\n  fetchImages(searchKey)\n    .then(images => renderImages(images))\n    .catch(error => {\n      console.error(error);\n      createMessage('Error fetching images. Please try again later.');\n    })\n    .finally(() => {\n      loaderEl.style.display = 'none';\n      buttonEl.disabled = false;\n    });\n}\n\nfunction fetchImages(searchText) {\n  const apiKey = '41460845-2ab95350f4581127087fd5faf';\n  const searchParamsObject = {\n    key: apiKey,\n    q: searchText,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const searchParams = new URLSearchParams(searchParamsObject);\n\n  return fetch(`https://pixabay.com/api/?${searchParams.toString()}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.hits && data.hits.length > 0) {\n        return data;\n      } else {\n        throw new Error('No images found.');\n      }\n    })\n    .catch(error => {\n      console.error('Fetch error:', error);\n      createMessage('Error fetching images. Please try again later.');\n      throw error;\n    });\n}\n\nconst galleryEl = document.querySelector('.gallery');\n","import { createMessage } from './js/notifications';\nimport { downloadImages } from './js/download';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const formEl = document.querySelector('.search-form');\n  const loadingMessageEl = document.querySelector('.loading-message');\n\n  if (!formEl || !loadingMessageEl) {\n    console.error('Form or loading message element not found.');\n    return;\n  }\n\n  loadingMessageEl.style.display = 'none';\n\n  formEl.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const searchKey = formEl.elements.search.value.trim();\n\n    if (!searchKey) {\n      createMessage('Search must be filled!');\n      return;\n    }\n\n    formEl.reset();\n\n    try {\n      loadingMessageEl.style.display = 'block';\n      await downloadImages(searchKey);\n    } catch (error) {\n      console.error('Error downloading images:', error.message);\n      createMessage('Error downloading images. Please try again later.');\n    } finally {\n      loadingMessageEl.style.display = 'none';\n    }\n  });\n});\n"],"names":["octagonIconUrl","closeIconUrl","createMessage","textMessage","iziToast","instance","toast","messageElement","galleryEl","lightboxConfig","gallery","SimpleLightbox","generateImageHTML","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderImages","images","galleryHTML","buttonEl","loaderEl","downloadImages","searchKey","fetchImages","error","searchText","searchParamsObject","searchParams","response","data","formEl","loadingMessageEl","event"],"mappings":"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"}